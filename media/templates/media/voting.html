{% extends "media/base.html" %}
{% load custom_tags %}
{% block content %}
    {% for p in profile %}
        {% if p.user in users %}
            <article class="media content-section">
                <div class="row">
                    <img src="{{ p.image.url }}" class = "rounded-circle article-img">
                    <div class="media-body">
                            <a class="mr-2 text-muted" href="#">{{ p.user }}</a>
                            <!-- <a class="btn btn-danger btn-sm  mt-1 mb-1" href="#">Upvote {{ p.votes.all.count }}</a>   -->
                            <form action="{% url 'vote_user' %}" method="POST">
                                {% csrf_token %}
                                <input type="hidden" name="profile_id" value="{{ p.id }}">
                                {% if user not in p.votes.all %}
                                    <button class="btn btn-success btn-sm  mt-1 mb-1" type="submit">Vote</button>
                                {% else %}
                                    <button class="btn btn-danger btn-sm  mt-1 mb-1" type="submit">Undo Vote</button>
                                {% endif %}
                            </form>
                            <strong>{{ p.votes.all.count }} Votes</strong>
                    </div>
                </div>
            </article>
        {% endif %}
    {% endfor %}
{% endblock content %}
